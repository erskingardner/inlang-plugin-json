var I=Object.create;var j=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var B=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of C(t))!_.call(e,i)&&i!==n&&j(e,i,{get:()=>t[i],enumerable:!(o=E(t,i))||o.enumerable});return e};var K=(e,t,n)=>(n=e!=null?I(T(e)):{},B(t||!e||!e.__esModule?j(n,"default",{value:e,enumerable:!0}):n,e));var R=A((Y,O)=>{O.exports=y;y.flatten=y;y.unflatten=P;function w(e){return e&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function x(e){return e}function y(e,t){t=t||{};let n=t.delimiter||".",o=t.maxDepth,i=t.transformKey||x,c={};function b(l,d,g){g=g||1,Object.keys(l).forEach(function(s){let r=l[s],a=t.safe&&Array.isArray(r),u=Object.prototype.toString.call(r),f=w(r),m=u==="[object Object]"||u==="[object Array]",p=d?d+n+i(s):i(s);if(!a&&!f&&m&&Object.keys(r).length&&(!t.maxDepth||g<o))return b(r,p,g+1);c[p]=r})}return b(e),c}function P(e,t){t=t||{};let n=t.delimiter||".",o=t.overwrite||!1,i=t.transformKey||x,c={};if(w(e)||Object.prototype.toString.call(e)!=="[object Object]")return e;function l(s){let r=Number(s);return isNaN(r)||s.indexOf(".")!==-1||t.object?s:r}function d(s,r,a){return Object.keys(a).reduce(function(u,f){return u[s+n+f]=a[f],u},r)}function g(s){let r=Object.prototype.toString.call(s),a=r==="[object Array]",u=r==="[object Object]";if(s){if(a)return!s.length;if(u)return!Object.keys(s).length}else return!0}return e=Object.keys(e).reduce(function(s,r){let a=Object.prototype.toString.call(e[r]);return!(a==="[object Object]"||a==="[object Array]")||g(e[r])?(s[r]=e[r],s):d(r,s,y(e[r],t))},{}),Object.keys(e).forEach(function(s){let r=s.split(n).map(i),a=l(r.shift()),u=l(r[0]),f=c;for(;u!==void 0;){if(a==="__proto__")return;let m=Object.prototype.toString.call(f[a]),p=m==="[object Object]"||m==="[object Array]";if(!o&&!p&&typeof f[a]<"u")return;(o&&!p||!o&&f[a]==null)&&(f[a]=typeof u=="number"&&!t.object?[]:{}),f=f[a],r.length>0&&(a=l(r.shift()),u=l(r[0]))}f[a]=P(e[s],t)}),c}});function h(e){return t=>n=>e({settings:t,env:n})}var v=K(R(),1);var $=M;function M(e,t,n){var o,i;if(Array.isArray(t)&&(o=t.slice(0)),typeof t=="string"&&(o=t.split(".")),typeof t=="symbol"&&(o=[t]),!Array.isArray(o))throw new Error("props arg must be an array, a string or a symbol");if(i=o.pop(),!i)return!1;S(i);for(var c;c=o.shift();)if(S(c),typeof e[c]>"u"&&(e[c]={}),e=e[c],!e||typeof e!="object")return!1;return e[i]=n,!0}function S(e){if(e=="__proto__"||e=="constructor"||e=="prototype")throw new Error("setting of prototype values not supported")}var N=h(({settings:e,env:t})=>({id:"samuelstroschein.inlangPluginJson",async config(){return{languages:await J({$fs:t.$fs,settings:e}),readResources:async n=>L({...n,$fs:t.$fs,settings:e}),writeResources:async n=>k({...n,$fs:t.$fs,settings:e})}}}));async function J(e){let[t,n]=e.settings.pathPattern.split("{language}"),o=await e.$fs.readdir(t),i=[];for(let c of o)typeof c=="string"&&c.endsWith(".json")&&i.push(c.replace(".json",""));return i}async function L(e){let t=[];for(let n of e.config.languages){let o=e.settings.pathPattern.replace("{language}",n),i=JSON.parse(await e.$fs.readFile(o,{encoding:"utf-8"})),c=(0,v.default)(i);t.push(z(c,n))}return t}async function k(e){for(let t of e.resources){let n=e.settings.pathPattern.replace("{language}",t.languageTag.name);await e.$fs.writeFile(n,D(t))}}function z(e,t){return{type:"Resource",languageTag:{type:"LanguageTag",name:t},body:Object.entries(e).map(([n,o])=>F(n,o))}}function F(e,t){return{type:"Message",id:{type:"Identifier",name:e},pattern:{type:"Pattern",elements:[{type:"Text",value:t}]}}}function D(e){let t={};return e.body.forEach(n=>{let[o,i]=W(n);$(t,o,i)}),JSON.stringify(t,null,4)}function W(e){return[e.id.name,e.pattern.elements[0].value]}export{N as default};
/*! Bundled license information:

@inlang/core/dist/plugin/pluginBuildConfig.js:
  (*! DON'T TOP-LEVEL IMPORT ESBUILD PLUGINS. USE DYNAMIC IMPORTS. *)
  (*! See https://github.com/inlang/inlang/issues/486 *)
*/
